group 'Bordeaux Ink.'
version '0.0.1'

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'checkstyle'

def generatedResources = "$buildDir/generated-resources/main"

def description = """
    Project: ${project.name}
    
    Author(s):  Rik de Graaff,
                Lucas Galery KÃ¤ser,
                Luc Kury,
                David Lengweiler
"""

sourceSets {
    main {
        java.outputDir = file('app/out/main')
         java {
              srcDir 'app/src/main/java'
              }
         }


    test {
        java.outputDir = file('app/out/test')
         java {
              srcDir 'app/src/test/java'
              }
         }
}

project.buildDir = '/app/build/'


idea{
    module{
        inheritOutputDirs = false
        outputDir = compileJava.destinationDir
        testOutputDir = compileTestJava.destinationDir
    }
}

//specifies source compatibility to Java 8
sourceCompatibility = 1.8

//adds maven central as a maven repository
repositories {
    jcenter()
}

dependencies {
    testCompile 'junit:junit:4.12'
    compile 'junit:junit:4.12'
}

/*
The following statements are respondible for:
    a) adding the compile-libraries to the jar
    b) setting the executable main class, so the jar is executable
 */
jar {
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } // a) Adding dependencies to jar
    }
    manifest{
        attributes 'Main-Class': 'ch.unibas.cs.p9.fs18.example.HelloWorld' // b) Set main class
    }
}

/**
 * Example task which simply prints the project's description
 */
task info {
    doFirst{
        println "${description}"
    }
}

//a task that generates the resources:
task generateMyResources {
    doLast {
        def generated = new File(generatedResources, "myGeneratedResource.properties")
        generated.text = "message=Stay happy!"
    }
}
