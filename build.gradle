// Plugins ---------------------------------
plugins {
    id 'java'
    id 'idea'
    id 'checkstyle'
    id 'com.adarshr.test-logger' version '1.1.2'
}

// Repos -----------------------------------
repositories {
    jcenter()
}

// Dependencies ----------------------------
dependencies {
    testCompile 'junit:junit:4.12'
    compile 'junit:junit:4.12'
}

//apply plugin: 'java'
//apply plugin: 'idea'
//apply plugin: 'checkstyle'

// Project Settings-------------------------
group 'Bordeaux Ink.'
version '0.3.0-beta1'
sourceCompatibility = 1.8
project.buildDir = 'app/build/'
compileJava.options.fork = true

def description = """
    Project: ${project.name}-
    
    Author(s):  Rik de Graaff,
                Lucas Galery KÃ¤ser,
                Luc Kury,
                David Lengweiler
"""

checkstyle { 
    toolVersion = '8.5'
}

// Source Sets -------------------------------
sourceSets {
    main {
         java {
              srcDir 'app/src/main/java'
              }

        resources {
            srcDirs = ['app/src/main/java', 'src/main/resources']
            exclude "**/*.java"

        }
         java.outputDir = file('app/out/main')

    }

    test {
         java {
              srcDir 'app/src/test/java'
              }
         java.outputDir = file('app/out/test')
         }
}

idea {
    module{
        testSourceDirs += project.sourceSets.main.java.srcDirs
        inheritOutputDirs = true
        outputDir = compileJava.destinationDir
        testOutputDir = compileTestJava.destinationDir
    }
}

// Jar file settings -----------------------
jar {
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
    manifest{
        attributes 'Main-Class': 'tech.subluminal.main.Subluminal'
    }
}

// Define new task -------------------------
task info {
    doFirst{
        println "${description}"
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.6'
}

// Task settings ---------------------------
tasks.withType(Checkstyle) {
  reports {
    html.enabled = true
  }
}

javadoc {
    setDestinationDir(file('docs/javadocs'))
}

// task openBrowser(type:Exec) {
//     java.awt.Desktop.desktop.browse rootProject.path+"docs/javadocs/index.html".toURI()
// }